# ERC20 Fungible Token Deployment for Beginners

_**Deployment to POA's Sokol Live Test Network using the Truffle environment and OpenZeppelin library of well-established Smart Contracts.**_

_**OpenZeppelin Contracts have already been tested thoroughly and follow all ERC Standards and are up-to-date.**_\
_**For Production use; be sure to have final contracts audited to prevent loss of assets.**_

## Install Global Dependencies

- node
- npm || yarn
- truffle
- ganache-cli (**optional**)

_ERC20 Tutorial is performed in a Linux Environment, therefore, certain commands & methods of execution may differ from a Windows Environment. I will be using VS Code IDE for code editing and a bash terminal while setting up project environment. Lines starting with '$' will be a command performed within a system terminal_

## Mnemonic Seed Phrase
_This method of obtaining mnemonic seed should **ONLY** be used for testing purposes. For production use on a main network with actual value, a more secure method should be used to obtain an account for deployment, such as geth, parity, mew (MyEtherWallet) or mycrypto._\
_Any 12-word mnemonic seed phrase generated by an EVM based wallet should work. If you have one, you can skip this step to generate one_

1. We are going to use 'ganache-cli' in a terminal to obtain our 12-word mnemonic seed to use as our secret to deploy on Sokol Test Network.
   
$ `ganache-cli`

**NOTE**\
This will start a local EVM & display our mnemonic seed, copy the 12 words and paste into a new file named `.secret` inside our project root directory. To start 'ganache-cli' with the same accounts next time, use the command below to do so.

$ `ganache-cli -m 'twelve word seed entered here within quotes'`

## Setting up project environment

1. Create new directory for our project & 'cd' into the newly created project directory. Project name I will be using for this tutorial will be 'HashGuideCoin', replace with desired name of your project.
   
$ `mkdir HashGuideCoin && cd "$_"`

1. Initialize our project using desired node package manager ( **npm** || **yarn** ) & initialize the truffle project at the same time. I will be using yarn in this tutorial but npm will work as well.
   
$ `yarn init -y && truffle init`\
**OR**\
$ `npm init -y && truffle init`

1. Add required dependencies needed for this project. This will create a folder within our project called 'node_modules' that stores all dependencies added using the package manager, to the current project.
   
$ `yarn add @openzeppelin/contracts @truffle/hdwallet-provider`\
**OR**\
$ `npm install @openzeppelin/contracts @truffle/hdwallet-provider --save`

1. Time to open project in desired code editor. I will be using VS Code for this tutorial. Visual Studio Code is an Open Source Code IDE that is free-to-use and top of the line. To open project folder within VSCode, enter the command below in the terminal.
   
$ `code .`\
**OR**\
$ `code /path/to/project`

## Configuring Truffle
_We will be configuring truffle within our project with the ability to deploy to a live network (Live Test networks such as: Sokol, Ropsten, Kovan, etc || Main Networks such as: Ethereum, POA Core, Binance Smart Chain, etc) using truffle's HDWallet-Provider AND with the ability to use a local javascript-based EVM development network, provided by 'ganache-cli' running in the terminal._
1. open **truffle-config.js** in code editor

**Configuration used for this tutorial**
```
// 'HDWalletProvider' package provided by @truffle/hdwallet-provider 
// to allow deployment to HttpProvider using Web3 
const HDWalletProvider = require('@truffle/hdwallet-provider');

// 'fs' & 'mnemonic' assigns our 12-word phrase to a variable
const fs = require('fs');
const mnemonic = fs.readFileSync(".secret").toString().trim();

// 'sokol' assigns Sokol RPC address a variable to use  
// with HttpProvider
const sokol = 'https://sokol.poa.network';

module.exports = {

  networks: {

    // network module 'development' will deploy on 
    // localhost on port 8545. In this case, ganache-cli.
    development: {
     host: "127.0.0.1",
     port: 8545,
     network_id: "*",
    },

    // network module 'sokol' uses HttpProvider to 
    // deploy to live network. In this case, sokol.
    sokol: {
    provider: () => new HDWalletProvider(mnemonic, sokol),
    network_id: 77,
    }
  },

  // Truffle offers 'compilers' options to change compiler or version.
  // In another tutorial, we will go over other options provided.
  compilers: {
    solc: {
      version: "0.8.1",
    }
  }
};
```

## Writing our smart contract
_Smart Contracts in this tutorial will be written in the programming language called 'Solidity'. This being said, we need to make sure our contracts have the '.sol' file extension to be recognized._

1. Create a new file in the `contracts` directory within the root of our project. Name this file according the the contract type it will be, mine being `HashGuideCoin.sol` - Let's get started!

**HashGuideCoin contract**
```
// SPDX-License-Identifier: MIT

// Import ERC20 contract from openzeppelin package
import "../node_modules/@openzeppelin/contracts/token/ERC20/ERC20.sol"

pragma solidity >=0.4.0 <0.9.0

contract HashGuideCoin is ERC20 {
    constructor () public ERC20("HashGuideCoin", "HGC") {
        _mint(msg.sender, 100000 * (10 ** uint256(decimals())));
    }
}
```
_Constructor arguments are required to deploy this ERC20 contract. We can find these inside '@openzeppelin/contracts/token/ERC20/ERC20.sol'_

## Creating deploy script
- Create new file inside the 'migrations' folder & name it '1_deploy_contracts.js'. Scripts inside the 'migrations' folder are run in numerical order. If you need additional scripts run during deployment, name them accordingly.\
Example: 1_initial_migrations.js, 2_deploy_contracts.js would run in that exact order.

**Deployment script for 'HashGuideCoin' contract**
```
const HashGuideCoin = artifacts.require("./HashGuideCoin.sol");

module.exports = function(deployer) {
    deployer.deploy(HashGuideCoin);
};
```

## Interacting with deployed contract

_**Stay tuned to @hashguide YouTube for upcoming tutorial on interacting with contracts using a few different methods. For now, head on over to [truffle-console.js](https://github.com/hashguide/erc20-tutorial/blob/master/tutorial-notes/truffle-console.js) for a brief explanation on using 'truffle console' to interact with newly deployed ERC20 token.**_